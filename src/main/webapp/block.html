<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="resources/static/center/staff/flowchart/block.css">
    <link rel="stylesheet" href="resources/libs/ECOTree-master/ECOTree.css">
    <script src="resources/libs/ECOTree-master/ECOTree.js"></script>
    <script src="resources/libs/jquery_3.1.0.js"></script>
    <xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v"/>
    <style>v\:*{ behavior:url(#default#VML);}</style>
    <xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v" />
    <script>
        $(document).ready(function () {
            createTree();
        });

        function createTree() {
            myTree = new ECOTree('myTree','myTreeContainer');
           createSomeNode(0, -1, "Корневое имя"); //TODO получить имя организации
        }

        function addChild(parent) {
            var name = prompt("Введите название подраздела", "");
            createSomeNode(Date.now(), parent, name);
        }
        
        function createSomeNode(id, parent, name) {
            var l = name.length * 13;
            if (l < 68) l = 68;
            myTree.add(id, parent, name, l);
            myTree.UpdateTree();
            nodePlusOnClick();


        }

        function nodePlusOnClick() {
            $(".node_plus").click(function () {
                addChild($(this).parent().parent().attr('id'));
            });
        }


    </script>
</head>
<body>
<div id="myTreeContainer"></div>
</body>
</html>